---
name: "poison"
description: "Takes damage based on maximum health and increases over time."
duration: 8
interval: 0.5
chance: 0.6
tick:
  jexl: |
    if (!state['amp']) {
      state['amp'] = 0.01;
    } else {
      state['amp'] = state['amp'] + 0.01;
    }

    damage = this.target.stats[Attribute.maxhealth] * (0.01 + state['amp']);

    //log.accept('damage is ' + damage);
    //log.accept('current health is = ' + this.target.stats[Attribute.health]);

    spells.damage(this.source, this.target, -damage, DamageType.poison);